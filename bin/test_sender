#!/usr/bin/env ruby
# -*- mode: ruby -*-

$LOAD_PATH << File.join(File.dirname(__FILE__), '..', 'lib')

require 'messaging'

def random_interval
  rand * 0.7
end

def produce_message
  '!' * rand(80)
end

sender = MessageSender.new('tcp://localhost:61616', 'TEST')
loop do
  sender.send_text_message produce_message
  sleep random_interval
end


trap('INT') { sender.close! }

  
